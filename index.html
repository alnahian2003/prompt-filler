<!doctype html>
<html lang="en" x-data="app()" x-init="init()" class="h-full antialiased">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Prompt Filler</title>
    <meta name="description"
        content="Prompt Filler is a web app that auto-detects placeholders, creates input fields, and previews AI prompts in real time for effortless editing.">
    <meta name="keywords"
        content="Prompt Filler, AI prompts, dynamic placeholders, Tailwind CSS, Alpine.js, prompt manager, live preview, prompt automation">
    <meta name="author" content="Al Nahian">
    <meta name="robots" content="index, follow">
    <link rel="canonical" href="https://alnahian2003.github.io/prompt-filler/">

    <!-- Open Graph -->
    <meta property="og:type" content="website">
    <meta property="og:title" content="Prompt Filler | Instantly fill AI prompt placeholders dynamically">
    <meta property="og:description"
        content="Prompt Filler is a web app that auto-detects placeholders, creates input fields, and previews AI prompts in real time for effortless editing.">
    <meta property="og:url" content="https://alnahian2003.github.io/prompt-filler/">
    <meta property="og:image" content="https://alnahian2003.github.io/prompt-filler/preview.jpg">

    <!-- Twitter -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Prompt Filler | Instantly fill AI prompt placeholders dynamically">
    <meta name="twitter:description"
        content="Prompt Filler is a web app that auto-detects placeholders, creates input fields, and previews AI prompts in real time for effortless editing.">
    <meta name="twitter:image" content="https://alnahian2003.github.io/prompt-filler/preview.jpg">

    <!-- Favicon -->
    <link rel="icon" href="https://avatars.githubusercontent.com/u/61485238?s=48&v=4" type="image/png">

    <!-- Schema.org JSON-LD -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "SoftwareApplication",
      "name": "Prompt Filler",
      "url": "https://alnahian2003.github.io/prompt-filler/",
      "description": "Prompt Filler is a web app that auto-detects placeholders, creates input fields, and previews AI prompts in real time for effortless editing.",
      "applicationCategory": "ProductivityApplication",
      "operatingSystem": "Web",
      "author": {
        "@type": "Person",
        "name": "Al Nahian"
      },
      "image": "https://alnahian2003.github.io/prompt-filler/preview.jpg"
    }
    </script>

    <!-- Tailwind CSS via CDN. Uses the latest CDN build which aligns with v4 utility syntax. -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        // Tailwind config
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        sans: ["Inter", "ui-sans-serif", "system-ui", "-apple-system", "Segoe UI", "Roboto", "Noto Sans", "Ubuntu", "Cantarell", "Helvetica Neue", "Arial", "sans-serif"],
                    },
                    boxShadow: {
                        soft: "0 1px 2px 0 rgb(0 0 0 / 0.05), 0 8px 16px -4px rgb(0 0 0 / 0.08)",
                    }
                }
            },
            darkMode: "class"
        }
    </script>
    <!-- Alpine.js -->
    <script defer src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        /* Only custom CSS that cannot be replicated with Tailwind */
        
        /* Token color-mix backgrounds (Tailwind doesn't support color-mix in utilities) */
        .token {
            background: color-mix(in oklab, CanvasText 12%, transparent);
        }

        .token:hover {
            background: color-mix(in oklab, CanvasText 20%, transparent);
        }

        .token-missing {
            outline: 2px dashed color-mix(in oklab, #ff0000 40%, transparent);
            outline-offset: 0.1px;
        }

        .token-missing:hover {
            outline-color: color-mix(in oklab, #ff0000 60%, transparent);
        }

        .token-filled {
            outline: 2px dashed color-mix(in oklab, #00cd48 40%, transparent);
            outline-offset: 0.1px;
        }

        .token-filled:hover {
            outline-color: color-mix(in oklab, #00cd48 60%, transparent);
        }

        /* Custom animations */
        @keyframes pulse-red {
            0%, 100% { outline-color: color-mix(in oklab, #ff0000 40%, transparent); }
            50% { outline-color: color-mix(in oklab, #ff0000 20%, transparent); }
        }

        @keyframes slideInUp {
            from {
                opacity: 0;
                transform: translateY(10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        @keyframes shimmer {
            0% { background-position: -1000px 0; }
            100% { background-position: 1000px 0; }
        }

        .animate-slide-in {
            animation: slideInUp 0.3s ease-out;
        }

        .animate-fade-in {
            animation: fadeIn 0.2s ease-out;
        }

        .animate-pulse-red {
            animation: pulse-red 2s ease-in-out infinite;
        }

        /* Skeleton shimmer effect (gradient animation) */
        .skeleton {
            background: linear-gradient(90deg, 
                color-mix(in oklab, CanvasText 5%, transparent) 25%, 
                color-mix(in oklab, CanvasText 10%, transparent) 50%, 
                color-mix(in oklab, CanvasText 5%, transparent) 75%
            );
            background-size: 1000px 100%;
            animation: shimmer 2s infinite;
        }

        /* Custom tooltip for buttons only (not for token spans) */
        button[title]:hover::after {
            content: attr(title);
            position: absolute;
            bottom: 100%;
            left: 50%;
            transform: translateX(-50%);
            padding: 0.5rem 0.75rem;
            background: rgba(255, 255, 255, 0.95);
            color: #171717;
            font-size: 0.75rem;
            border-radius: 0.375rem;
            white-space: nowrap;
            pointer-events: none;
            z-index: 50;
            margin-bottom: 0.25rem;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
        }

        /* Dark mode support for button tooltips */
        .dark button[title]:hover::after {
            background: rgba(0, 0, 0, 0.9);
            color: white;
            box-shadow: 0 4px 6px -1px rgba(255, 255, 255, 0.1), 0 2px 4px -1px rgba(255, 255, 255, 0.06);
        }
    </style>
</head>

<body :class="{ 'dark bg-neutral-950 text-neutral-100': dark, 'bg-neutral-50 text-neutral-900': !dark }"
    class="min-h-full"
    @keydown.window.ctrl.s.prevent="saveToLocal()"
    @keydown.window.meta.s.prevent="saveToLocal()"
    @keydown.window.ctrl.shift.c.prevent="copyRaw()"
    @keydown.window.meta.shift.c.prevent="copyRaw()"
    @keydown.window.ctrl.shift.v.prevent="copyOutput()"
    @keydown.window.meta.shift.v.prevent="copyOutput()"
    @keydown.window.ctrl.shift.x.prevent="clearValues()"
    @keydown.window.meta.shift.x.prevent="clearValues()">
    
    <!-- Toast notifications -->
    <template x-if="toastMessage">
        <div x-show="toastVisible" x-transition
            :class="toastClasses"
            class="fixed bottom-6 left-1/2 -translate-x-1/2 rounded-full px-4 py-2 text-sm border shadow-lg z-50"
            x-text="toastMessage"></div>
    </template>
    
    <!-- Progress bar removed per user request -->
    
    <!-- App Shell -->
    <header
        class="sticky top-0 z-50 backdrop-blur supports-[backdrop-filter]:bg-white/60 dark:supports-[backdrop-filter]:bg-neutral-900/40 border-b border-neutral-200 dark:border-neutral-800 transition-all duration-300">
        <div class="mx-auto max-w-7xl px-4 sm:px-6 lg:px-8 h-16 flex items-center justify-between">
            <div class="flex items-center gap-3">
                <h1 class="text-lg font-semibold tracking-tight">Prompt Filler</h1>
                <span class="hidden sm:inline text-sm text-neutral-500 dark:text-neutral-400"
                    x-text="appVersion"></span>
            </div>
            <div class="flex items-center gap-2">
                <button @click="toggleDark()"
                    class="rounded-full p-2 text-sm border border-neutral-200 dark:border-neutral-800 hover:bg-neutral-100 dark:hover:bg-neutral-800">
                    <span class="theme-toggler">
                        <svg x-show="dark" svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"
                            stroke-width="1.5" stroke="currentColor" class="size-5">
                            <path stroke-linecap="round" stroke-linejoin="round"
                                d="M12 3v2.25m6.364.386-1.591 1.591M21 12h-2.25m-.386 6.364-1.591-1.591M12 18.75V21m-4.773-4.227-1.591 1.591M5.25 12H3m4.227-4.773L5.636 5.636M15.75 12a3.75 3.75 0 1 1-7.5 0 3.75 3.75 0 0 1 7.5 0Z" />
                        </svg>
                        <svg x-show="!dark" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"
                            stroke-width="1.5" stroke="currentColor" class="size-5">
                            <path stroke-linecap="round" stroke-linejoin="round"
                                d="M21.752 15.002A9.72 9.72 0 0 1 18 15.75c-5.385 0-9.75-4.365-9.75-9.75 0-1.33.266-2.597.748-3.752A9.753 9.753 0 0 0 3 11.25C3 16.635 7.365 21 12.75 21a9.753 9.753 0 0 0 9.002-5.998Z" />
                        </svg>
                    </span>
                </button>
                <a href="https://github.com/alnahian2003/prompt-filler" target="_blank"
                    class=" sm:inline rounded-2xl px-3 py-2 text-sm border border-neutral-200 dark:border-neutral-800 hover:bg-neutral-100 dark:hover:bg-neutral-800">View
                    on Github</a>
            </div>
        </div>
    </header>

    <main class="mx-auto max-w-7xl px-4 sm:px-6 lg:px-8 py-8 grid grid-cols-1 lg:grid-cols-2 gap-6">
        <!-- Left: Input composer -->
        <section class="space-y-4">
            <div
                class="rounded-3xl border border-neutral-200 dark:border-neutral-800 bg-white/70 dark:bg-neutral-900/60 shadow-soft">
                <div class="p-4 sm:p-6 border-b border-neutral-200 dark:border-neutral-800">
                    <div class="flex items-center justify-between">
                        <h2 class="text-base sm:text-lg font-semibold">Your prompt</h2>
                        <div class="flex items-center gap-2 text-xs sm:text-sm">
                            <button @click="resetAll()"
                                class="rounded-full border border-neutral-200 dark:border-neutral-800 px-3 py-1 hover:bg-red-100 dark:hover:bg-red-950/60 scale-100 hover:scale-95 transition-all duration-200 active:scale-100"
                                type="button">🧹
                                Reset</button>
                        </div>
                    </div>

                    <!-- Demo Prompts -->
                    <div id="examples" class="mt-2">
                        <h4 class="text-xs text-gray-500 font-semibold mb-2">Try these examples: </h4>
                        <div class="flex gap-2 flex items-center justify-start flex-wrap">
                            <template x-for="(example, index) in examples">
                                <button @click="pasteExamples(index)"
                                    class="rounded-full border border-neutral-200 dark:border-neutral-800 px-3 py-1 hover:bg-neutral-100 dark:hover:bg-neutral-800 text-xs"
                                    x-text="example.name"></button>
                            </template>
                        </div>
                    </div>
                </div>
                <div class="p-4 sm:p-6 space-y-3">
                    <textarea x-model.trim="raw" @input="parse()"
                        class="w-full h-56 sm:h-72 rounded-2xl border border-neutral-200 dark:border-neutral-800 bg-white/60 dark:bg-neutral-950/40 p-4 focus:outline-none focus:ring-2 focus:ring-indigo-500/40 placeholder:opacity-60 transition-all duration-200 focus:scale-[1.01]"
                        placeholder="Paste or type your prompt. Use placeholders like [your name], [company], [role], [email] ..."
                        autofocus></textarea>
                    
                    <!-- Placeholder format selectors -->
                    <div class="rounded-2xl border border-neutral-200 dark:border-neutral-800 bg-gradient-to-br from-neutral-50 to-white dark:from-neutral-900/50 dark:to-neutral-900/30 p-4">
                        <div class="flex items-center justify-between mb-3">
                            <h4 class="text-sm font-semibold text-neutral-700 dark:text-neutral-300">Detect Placeholders Using</h4>
                            <button @click="resetFormats()" class="text-xs text-neutral-500 hover:text-neutral-700 dark:text-neutral-400 dark:hover:text-neutral-200 underline">Reset</button>
                        </div>
                        <div class="grid grid-cols-2 sm:grid-cols-4 gap-2 mb-3">
                            <label class="relative flex items-center gap-2 px-3 py-2 rounded-xl border transition-all cursor-pointer"
                                :class="formats.brackets ? 'border-indigo-500 bg-indigo-50 dark:bg-indigo-950/30' : 'border-neutral-200 dark:border-neutral-800 hover:border-neutral-300 dark:hover:border-neutral-600'">
                                <input type="checkbox" class="size-4 rounded border-neutral-300 accent-indigo-600" x-model="formats.brackets"
                                    @change="parse()">
                                <div class="flex flex-col">
                                    <span class="text-xs font-medium text-neutral-800 dark:text-neutral-200">[name]</span>
                                    <span class="text-[10px] text-neutral-500 dark:text-neutral-400">Square brackets</span>
                                </div>
                            </label>
                            <label class="relative flex items-center gap-2 px-3 py-2 rounded-xl border transition-all cursor-pointer"
                                :class="formats.handlebars ? 'border-indigo-500 bg-indigo-50 dark:bg-indigo-950/30' : 'border-neutral-200 dark:border-neutral-800 hover:border-neutral-300 dark:hover:border-neutral-600'">
                                <input type="checkbox" class="size-4 rounded border-neutral-300 accent-indigo-600" x-model="formats.handlebars"
                                    @change="parse()">
                                <div class="flex flex-col">
                                    <span class="text-xs font-medium text-neutral-800 dark:text-neutral-200">{{name}}</span>
                                    <span class="text-[10px] text-neutral-500 dark:text-neutral-400">Handlebars</span>
                                </div>
                            </label>
                            <label class="relative flex items-center gap-2 px-3 py-2 rounded-xl border transition-all cursor-pointer"
                                :class="formats.tpl ? 'border-indigo-500 bg-indigo-50 dark:bg-indigo-950/30' : 'border-neutral-200 dark:border-neutral-800 hover:border-neutral-300 dark:hover:border-neutral-600'">
                                <input type="checkbox" class="size-4 rounded border-neutral-300 accent-indigo-600" x-model="formats.tpl"
                                    @change="parse()">
                                <div class="flex flex-col">
                                    <span class="text-xs font-medium text-neutral-800 dark:text-neutral-200">${"${name}"}</span>
                                    <span class="text-[10px] text-neutral-500 dark:text-neutral-400">Template literal</span>
                                </div>
                            </label>
                            <label class="relative flex items-center gap-2 px-3 py-2 rounded-xl border transition-all cursor-pointer"
                                :class="formats.braces ? 'border-indigo-500 bg-indigo-50 dark:bg-indigo-950/30' : 'border-neutral-200 dark:border-neutral-800 hover:border-neutral-300 dark:hover:border-neutral-600'">
                                <input type="checkbox" class="size-4 rounded border-neutral-300 accent-indigo-600" x-model="formats.braces"
                                    @change="parse()">
                                <div class="flex flex-col">
                                    <span class="text-xs font-medium text-neutral-800 dark:text-neutral-200">{name}</span>
                                    <span class="text-[10px] text-neutral-500 dark:text-neutral-400">Simple braces</span>
                                </div>
                            </label>
                        </div>
                        <div class="flex items-center gap-2 pt-2 border-t border-neutral-200 dark:border-neutral-800">
                            <span class="text-xs font-medium text-neutral-600 dark:text-neutral-400">Custom:</span>
                            <input type="text" x-model="customOpen" @input="parse()"
                                class="w-20 rounded-lg border border-neutral-200 dark:border-neutral-800 bg-white dark:bg-neutral-950 px-2 py-1.5 text-xs focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent"
                                placeholder="<<">
                            <span class="text-neutral-400 dark:text-neutral-500">name</span>
                            <input type="text" x-model="customClose" @input="parse()"
                                class="w-20 rounded-lg border border-neutral-200 dark:border-neutral-800 bg-white dark:bg-neutral-950 px-2 py-1.5 text-xs focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent"
                                placeholder=">>">
                            <span class="text-[10px] text-neutral-500 dark:text-neutral-400 italic">e.g., &lt;&lt;name&gt;&gt; or %%name%%</span>
                        </div>
                    </div>

                    <div class="flex flex-wrap items-center gap-3 text-sm">
                        <div
                            class="rounded-full border border-neutral-200 dark:border-neutral-800 px-3 py-1 bg-neutral-50 dark:bg-neutral-900 transition-all duration-300"
                            :class="placeholders.length > 0 ? 'animate-slide-in' : ''">
                            Detected fields: <span class="font-medium inline-flex items-center gap-1" x-text="placeholders.length"></span>
                            <span x-show="placeholders.length > 0" class="ml-1">
                                <span x-show="getFilledCount() === placeholders.length" class="text-green-600 dark:text-green-400">✓</span>
                                <span x-show="getFilledCount() < placeholders.length && getFilledCount() > 0" class="text-amber-600 dark:text-amber-400" x-text="`(${getFilledCount()}/${placeholders.length})`"></span>
                            </span>
                        </div>
                        <button @click="copyRaw()" title="Copy raw prompt (Ctrl+Shift+C)"
                            class="rounded-full border border-neutral-200 dark:border-neutral-800 px-3 py-1 hover:bg-neutral-100 dark:hover:bg-neutral-800 hover:border-neutral-300 dark:hover:border-neutral-700 transition-all duration-200 hover:-translate-y-0.5 active:translate-y-0">
                            📋 Copy raw</button>
                        <button @click="saveToLocal()" title="Save to browser (Ctrl+S)"
                            class="rounded-full border border-neutral-200 dark:border-neutral-800 px-3 py-1 hover:bg-neutral-100 dark:hover:bg-neutral-800 hover:border-neutral-300 dark:hover:border-neutral-700 transition-all duration-200 hover:-translate-y-0.5 active:translate-y-0">
                            💾 Save</button>
                        <button @click="loadFromLocal()" title="Load from browser"
                            class="rounded-full border border-neutral-200 dark:border-neutral-800 px-3 py-1 hover:bg-neutral-100 dark:hover:bg-neutral-800 hover:border-neutral-300 dark:hover:border-neutral-700 transition-all duration-200 hover:-translate-y-0.5 active:translate-y-0">
                            📂 Load</button>
                    </div>
                </div>
            </div>

            <!-- Dynamic Fields -->
            <div
                class="rounded-3xl border border-neutral-200 dark:border-neutral-800 bg-white/70 dark:bg-neutral-900/60 shadow-soft transition-all duration-300"
                :class="placeholders.length > 0 ? 'animate-slide-in' : ''">
                <div
                    class="p-4 sm:p-6 border-b border-neutral-200 dark:border-neutral-800 flex items-center justify-between">
                    <h3 class="text-base sm:text-lg font-semibold">Fill the placeholders</h3>
                    <div class="text-sm text-neutral-500 dark:text-neutral-400 flex items-center gap-2" x-show="placeholders.length === 0">
                        <svg class="size-4 animate-pulse" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                        </svg>
                        No placeholders detected yet
                    </div>
                </div>
                <div class="p-4 sm:p-6 grid grid-cols-1 sm:grid-cols-2 gap-4" x-show="placeholders.length > 0">
                    <template x-for="(ph, index) in placeholders" :key="ph.key">
                        <label class="block animate-fade-in" :style="`animation-delay: ${index * 0.05}s`">
                            <span class="text-sm font-medium flex items-center gap-2">
                                <span class="capitalize" x-text="ph.label"></span>
                                <span x-show="values[ph.key]" class="text-green-600 dark:text-green-400 text-xs">✓</span>
                            </span>
                            <input type="text" :id="'input-' + ph.key" x-model="values[ph.key]" 
                                @input="apply()"
                                @keydown.enter="focusNextInput($event)"
                                class="mt-1 w-full rounded-xl border border-neutral-200 dark:border-neutral-800 bg-white/60 dark:bg-neutral-950/40 px-3 py-2 focus:outline-none focus:ring-2 focus:ring-indigo-500/40 focus:border-indigo-500 transition-all duration-200 focus:scale-[1.01]"
                                :placeholder="ph.placeholder">
                        </label>
                    </template>
                </div>
                
                <!-- Empty state -->
                <div x-show="placeholders.length === 0" class="p-8 sm:p-12 text-center opacity-60 hover:opacity-80 transition-opacity duration-300">
                    <div class="inline-flex items-center justify-center w-16 h-16 rounded-full bg-neutral-100 dark:bg-neutral-800 mb-4">
                        <svg class="size-8 text-neutral-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path>
                        </svg>
                    </div>
                    <p class="text-neutral-600 dark:text-neutral-400 text-sm">
                        Start typing your prompt above with placeholders like <span class="font-mono text-xs bg-neutral-200 dark:bg-neutral-800 px-2 py-1 rounded">[your name]</span>
                    </p>
                </div>
                
                <div class="px-4 sm:px-6 pb-6 flex items-center gap-2" x-show="placeholders.length">
                    <button @click="clearValues()" title="Clear all values (Ctrl+Shift+X)"
                        class="rounded-2xl px-3 py-2 text-sm border border-neutral-200 dark:border-neutral-800 hover:bg-neutral-100 dark:hover:bg-neutral-800 hover:border-neutral-300 dark:hover:border-neutral-700 transition-all duration-200 hover:-translate-y-0.5 active:translate-y-0">
                        ✨ Clear values
                    </button>
                    <button @click="fillExample()" title="Fill with example data" x-show="placeholders.length > 0"
                        class="rounded-2xl px-3 py-2 text-sm border border-neutral-200 dark:border-neutral-800 hover:bg-neutral-100 dark:hover:bg-neutral-800 hover:border-indigo-300 dark:hover:border-indigo-700 text-indigo-600 dark:text-indigo-400 transition-all duration-200 hover:-translate-y-0.5 active:translate-y-0">
                        🎲 Fill example
                    </button>
                </div>
            </div>
        </section>

        <!-- Right: Preview and Actions -->
        <section class="space-y-4">
            <div
                class="rounded-3xl border border-neutral-200 dark:border-neutral-800 bg-white/70 dark:bg-neutral-900/60 shadow-soft transition-all duration-300">
                <div
                    class="p-4 sm:p-6 border-b border-neutral-200 dark:border-neutral-800 flex items-center justify-between">
                    <h3 class="text-base sm:text-lg font-semibold flex items-center gap-2">
                        Preview
                        <span x-show="getFilledCount() === placeholders.length && placeholders.length > 0" class="text-xs px-2 py-1 rounded-full bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400 animate-fade-in">
                            Complete!
                        </span>
                    </h3>
                    <div class="text-xs text-neutral-500 dark:text-neutral-400" x-show="placeholders.length > 0">
                        <span x-text="`${getFilledCount()}/${placeholders.length} filled`"></span>
                    </div>
                </div>
                <div class="p-4 sm:p-6 space-y-3">
                    <div
                        class="rounded-2xl border border-neutral-200 dark:border-neutral-800 bg-white/60 dark:bg-neutral-950/40 p-4 min-h-24 leading-relaxed whitespace-pre-line relative group">
                        <template x-if="output.length">
                            <div x-html="highlight(output)" class="animate-fade-in"></div>
                        </template>
                        <template x-if="!output.length">
                            <div class="text-center py-6 opacity-60 hover:opacity-80 transition-opacity duration-300">
                                <div class="inline-flex items-center justify-center w-12 h-12 rounded-full bg-neutral-100 dark:bg-neutral-800 mb-2">
                                    <svg class="size-6 text-neutral-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path>
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"></path>
                                    </svg>
                                </div>
                                <p class="text-neutral-500 dark:text-neutral-400">Your filled prompt will appear here.</p>
                                <p class="text-xs text-neutral-400 dark:text-neutral-500 mt-2">Click on placeholders to jump to their fields</p>
                            </div>
                        </template>
                        
                        <!-- Quick copy button that appears on hover (styled like other buttons) -->
                        <button x-show="output.length" @click="copyOutput()"
                            class="absolute top-2 right-2 opacity-0 group-hover:opacity-100 transition-all duration-200 rounded-lg p-2 text-sm border border-neutral-200 dark:border-neutral-800 bg-white/90 dark:bg-neutral-900/60 hover:bg-neutral-100 dark:hover:bg-neutral-800"
                            title="Quick copy (Ctrl+Shift+V)">📋
                        </button>
                    </div>

                    <div class="flex flex-wrap items-center gap-2">
                        <button @click="copyOutput()" title="Copy filled prompt (Ctrl+Shift+V)"
                            class="rounded-2xl px-3 py-2 text-sm border border-neutral-200 dark:border-neutral-800 hover:bg-neutral-100 dark:hover:bg-neutral-800 hover:border-neutral-300 dark:hover:border-neutral-700 transition-all duration-200 hover:-translate-y-0.5 active:translate-y-0">
                            📋 Copy filled prompt
                        </button>
                        <button @click="downloadJSON()" title="Download as JSON file"
                            class="rounded-2xl px-3 py-2 text-sm border border-neutral-200 dark:border-neutral-800 hover:bg-neutral-100 dark:hover:bg-neutral-800 hover:border-neutral-300 dark:hover:border-neutral-700 transition-all duration-200 hover:-translate-y-0.5 active:translate-y-0">
                            💾 Download JSON
                        </button>
                    </div>
                    
                    <!-- Unfilled placeholder handling option -->
                    <div class="rounded-xl border border-neutral-200 dark:border-neutral-800 bg-neutral-50/50 dark:bg-neutral-900/30 p-3">
                        <label class="flex items-start gap-3 cursor-pointer group">
                            <input type="checkbox" class="mt-0.5 size-4 rounded border-neutral-300 accent-indigo-600 transition-all duration-200" x-model="keepTokens" @change="apply()">
                            <div class="flex-1">
                                <div class="text-sm font-medium text-neutral-700 dark:text-neutral-200 group-hover:text-indigo-600 dark:group-hover:text-indigo-400 transition-colors duration-200">
                                    Show unfilled placeholders in output
                                </div>
                                <p class="text-xs text-neutral-500 dark:text-neutral-400 mt-0.5">
                                    When checked, placeholders you haven't filled yet (like <span class="font-mono">[name]</span>) will appear in the copied text. Uncheck to hide them completely.
                                </p>
                            </div>
                        </label>
                    </div>
                </div>
            </div>

            <!-- Quick Guide -->
            <div
                class="rounded-3xl border border-neutral-200 dark:border-neutral-800 bg-gradient-to-br from-neutral-50 to-white dark:from-neutral-900 dark:to-neutral-950 shadow-soft p-6">
                <h4 class="font-semibold mb-2">How it works</h4>
                <ol class="text-sm space-y-2 list-decimal list-inside text-neutral-700 dark:text-neutral-300">
                    <li>Paste or type a prompt with placeholders. Enable the formats you want (square brackets, handlebars `{{}}`, template `${}`, simple `{}`, or a custom open/close pair).</li>
                    <li>The app detects unique placeholders across the enabled formats and builds input fields for each one.</li>
                    <li>Type your values. The preview updates in real time and highlights filled/unfilled tokens.</li>
                    <li>Copy the final text or export your values as JSON.</li>
                </ol>
            </div>
        </section>
    </main>

    <footer class="mx-auto max-w-7xl px-4 sm:px-6 lg:px-8 pb-10 text-xs text-neutral-500 dark:text-neutral-400">
        Data persists in your browser only. Made with 💖 by <a class="font-bold italic"
            href="https://github.com/alnahian2003" target="_blank">Al Nahian</a>
    </footer>

    <script>
        /**
         * Global function to focus on a placeholder input field
         * @param {string} key - The slugified key of the placeholder
         */
        window.focusPlaceholder = function(key) {
            const input = document.getElementById('input-' + key);
            if (!input) return;
            
            input.focus();
            input.scrollIntoView({ behavior: 'smooth', block: 'center' });
            
            // Add visual feedback with a temporary ring
            input.classList.add('ring-2', 'ring-indigo-500');
            setTimeout(() => {
                input.classList.remove('ring-2', 'ring-indigo-500');
            }, 1000);
        };

        /**
         * Main Alpine.js application
         */
        function app() {
            return {
                // App state
                appVersion: 'v1.1.0',
                dark: window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches,
                raw: '',
                placeholders: [], // Array of { key, label, placeholder }
                values: {},
                output: '',
                keepTokens: true,
                isProcessing: false,

                // Toast state
                toastMessage: '',
                toastVisible: false,
                toastClasses: '',

                // Placeholder format configuration
                formats: {
                    brackets: true,
                    handlebars: false,
                    tpl: false,
                    braces: false
                },
                customOpen: '',
                customClose: '',

                // Example prompts
                examples: [
                    {
                        name: 'Email Outreach',
                        text: `Hi [recipient name],

I hope this email finds you well. My name is [your name] and I'm reaching out from [your company].

I noticed that [specific observation about their company] and thought there might be an opportunity for us to collaborate.

[Your company] specializes in [your service/product], and I believe we could help [recipient company] achieve [specific benefit].

Would you be available for a brief 15-minute call next week to discuss this further?

Best regards,
[your name]
[your title]
[your email]
[your phone]`
                    },
                    {
                        name: 'Job Application',
                        text: `Dear [hiring manager name],

I am writing to express my strong interest in the [job title] position at [company name]. With [years of experience] years of experience in [relevant field], I am confident that I would be a valuable addition to your team.

In my previous role at [previous company], I successfully [specific achievement] which resulted in [quantifiable result]. My expertise in [key skill 1], [key skill 2], and [key skill 3] aligns perfectly with the requirements outlined in your job posting.

I am particularly drawn to [company name] because of [specific reason about company]. I would welcome the opportunity to discuss how my background in [relevant area] can contribute to [specific company goal/project].

Thank you for considering my application. I look forward to hearing from you.

Sincerely,
[your full name]
[your email]
[your phone number]`
                    },
                    {
                        name: 'Social Media Post',
                        text: `🚀 Excited to share that [your company] just launched [product/service name]!

After [time period] of development, we're finally ready to help [target audience] achieve [main benefit].

Key features include:
✅ [feature 1]
✅ [feature 2]
✅ [feature 3]

Special launch offer: [discount/offer details] - use code [promo code]

Check it out at [website url] and let me know what you think!

#[hashtag1] #[hashtag2] #[hashtag3] #[your industry]`
                    }
                ],

                // Lifecycle methods
                init() {
                    this.loadTheme();
                    this.loadFromLocal();
                    this.parse();
                },

                /**
                 * Focus next input on Enter key
                 */
                focusNextInput(event) {
                    const inputs = Array.from(document.querySelectorAll('input[type="text"]'));
                    const currentIndex = inputs.indexOf(event.target);
                    const nextInput = inputs[currentIndex + 1];
                    
                    if (nextInput) {
                        nextInput.focus();
                    }
                },

                /**
                 * Get count of filled placeholders
                 */
                getFilledCount() {
                    return this.placeholders.filter(ph => {
                        const value = this.values[ph.key];
                        return value && value.trim().length > 0;
                    }).length;
                },

                /**
                 * Fill placeholders with realistic example data - data-driven, zero if-blocks
                 */
                fillExample() {
                    // Data-driven matching rules (order = priority)
                    const MATCH_RULES = [
                        // Names - specific to general
                        { patterns: ['first', 'fname'], data: ['Alex', 'Jordan', 'Sarah', 'Michael', 'Emma', 'Chris', 'Taylor', 'Morgan'] },
                        { patterns: ['last', 'lname', 'surname'], data: ['Smith', 'Johnson', 'Williams', 'Brown', 'Jones', 'Garcia', 'Miller', 'Davis'] },
                        { patterns: ['name', 'sender', 'recipient', 'author', 'owner', 'creator', 'user'], data: ['Alex Morgan', 'Jordan Chen', 'Sarah Johnson', 'Michael Rodriguez', 'Emma Thompson', 'Chris Lee'] },
                        
                        // Contact - specific first
                        { patterns: ['phone', 'mobile', 'tel'], data: ['+1 (555) 123-4567', '+1 (555) 987-6543', '+44 20 7123 4567', '+1 (650) 555-0123'] },
                        { patterns: ['http', 'url', 'link'], data: ['https://example.com', 'https://startup.io/demo', 'https://innovation-labs.com/products'] },
                        { patterns: ['website', 'site', 'domain'], data: ['example.com', 'techstartup.io', 'innovation-labs.com', 'digitaldynamics.co'] },
                        { patterns: ['email', 'mail', 'contact'], data: ['alex.morgan@example.com', 'jordan@techstartup.io', 'sarah.j@company.com', 'team@innovation.co'] },
                        
                        // Organizations
                        { patterns: ['company', 'organization', 'org', 'business', 'firm', 'agency', 'corp'], data: ['TechVision Inc.', 'Innovation Labs', 'Digital Dynamics', 'CloudScale', 'DataFlow Systems'] },
                        
                        // Professional
                        { patterns: ['title', 'role', 'position', 'job'], data: ['Senior Product Manager', 'Marketing Director', 'Lead Developer', 'Data Scientist', 'UX Designer', 'CEO'] },
                        
                        // Offerings
                        { patterns: ['service'], data: ['Cloud Infrastructure', 'AI Solutions', 'Digital Marketing', 'Web Development', 'Data Analytics'] },
                        { patterns: ['product', 'platform', 'tool', 'app', 'software'], data: ['SaaS Platform', 'Mobile App', 'Analytics Dashboard', 'CRM System', 'API Gateway'] },
                        
                        // Temporal - specific first
                        { patterns: ['time', 'hour', 'meeting'], data: ['2:00 PM EST', '10:30 AM', '3:00 PM PST', '9:00 AM', '1:00 PM GMT'] },
                        { patterns: ['duration', 'period', 'timeframe', 'timeline'], data: ['3 months', '6 weeks', '90 days', 'Quarter', '2 years'] },
                        { patterns: ['date', 'day', 'deadline'], data: ['March 15, 2024', 'Next Tuesday', 'Q2 2024', 'April 1st', 'Next Wednesday'] },
                        
                        // Metrics
                        { patterns: ['metric', 'kpi', 'stat', 'number', 'count', 'result', 'achievement'], data: ['45% increase in revenue', '10,000+ users', '99.9% uptime', '300% ROI', '85% satisfaction'] },
                        
                        // Locations - specific first
                        { patterns: ['country', 'nation'], data: ['United States', 'United Kingdom', 'Canada', 'Germany', 'Australia'] },
                        { patterns: ['city'], data: ['San Francisco', 'New York', 'London', 'Austin', 'Seattle', 'Boston'] },
                        { patterns: ['location', 'place', 'address', 'office'], data: ['San Francisco, CA', 'New York, NY', 'London, UK', 'Austin, TX'] },
                        
                        // Marketing
                        { patterns: ['discount', 'sale', 'savings', 'offer'], data: ['20% off', '50% discount', 'Buy one get one free', '$100 off'] },
                        { patterns: ['code', 'promo', 'coupon', 'voucher'], data: ['LAUNCH2024', 'WELCOME50', 'SPRING25', 'SAVE20'] },
                        { patterns: ['hashtag', 'tag'], data: ['TechInnovation', 'StartupLife', 'DigitalTransformation', 'SaaS'] },
                        
                        // Industries
                        { patterns: ['industry', 'sector', 'field', 'domain', 'vertical'], data: ['SaaS', 'E-commerce', 'FinTech', 'HealthTech', 'EdTech'] },
                        
                        // Content
                        { patterns: ['description', 'summary', 'overview'], data: ['innovative solutions that drive growth', 'cutting-edge technology for modern businesses', 'scalable platform for enterprise needs'] },
                        { patterns: ['observation', 'notice', 'insight'], data: ['impressive growth trajectory', 'strong market presence', 'innovative approach to solving challenges'] },
                        { patterns: ['benefit', 'advantage', 'value'], data: ['increased efficiency', 'reduced operational costs', 'improved user experience', 'faster time to market'] },
                    ];
                    
                    let filledCount = 0;
                    
                    this.placeholders.forEach(ph => {
                        // Skip if already filled
                        if (this.values[ph.key]) return;
                        
                        const normalizedKey = ph.key.toLowerCase();
                        
                        // Find first matching rule (priority order, no if-blocks!)
                        const matchedRule = MATCH_RULES.find(rule => 
                            rule.patterns.some(pattern => normalizedKey.includes(pattern))
                        );
                        
                        // Apply matched data or fallback (ternary, not if!)
                        this.values[ph.key] = matchedRule 
                            ? matchedRule.data[Math.floor(Math.random() * matchedRule.data.length)]
                            : `Example ${ph.label}`;
                        
                        filledCount++;
                    });
                    
                    this.apply();
                    this.toast(`✨ Filled ${filledCount} field${filledCount !== 1 ? 's' : ''} with realistic data`, 2000, 'success');
                },

                // Theme management
                toggleDark() {
                    this.dark = !this.dark;
                    this.saveTheme();
                },

                saveTheme() {
                    localStorage.setItem('pf.theme', this.dark ? 'dark' : 'light');
                },

                loadTheme() {
                    const theme = localStorage.getItem('pf.theme');
                    if (theme) {
                        this.dark = theme === 'dark';
                    }
                },

                // Example management
                pasteExamples(index) {
                    if (!this.examples[index]) return;
                    this.raw = this.examples[index].text || '';
                    this.parse();
                },

                // Format configuration
                resetFormats() {
                    this.formats = {
                        brackets: true,
                        handlebars: false,
                        tpl: false,
                        braces: false
                    };
                    this.customOpen = '';
                    this.customClose = '';
                    this.parse();
                },

                // Utility methods
                /**
                 * Escape special regex characters in a string
                 * @param {string} str - String to escape
                 * @returns {string} Escaped string
                 */
                escapeRegex(str) {
                    return str.replace(/[.*+?^${}()|[\]\\]/g, '\\$&');
                },

                /**
                 * Escape HTML entities to prevent XSS and display issues
                 * @param {string} text - Text to escape
                 * @returns {string} HTML-safe text
                 */
                escapeHtml(text) {
                    const div = document.createElement('div');
                    div.textContent = text;
                    return div.innerHTML;
                },

                /**
                 * Convert a label to a URL-safe slug
                 * @param {string} label - Label to slugify
                 * @returns {string} Slugified label
                 */
                slug(label) {
                    return label
                        .toLowerCase()
                        .normalize('NFKD')
                        .replace(/[^a-z0-9]+/g, '_')
                        .replace(/^_|_$/g, '');
                },

                /**
                 * Clean up label for display - convert underscores, hyphens, dots to spaces
                 * Also handles camelCase and PascalCase by adding spaces before capitals
                 * @param {string} label - Raw label from placeholder
                 * @returns {string} Cleaned label ready for capitalize
                 */
                cleanLabel(label) {
                    return label
                        // Convert camelCase/PascalCase to spaces (e.g., "senderName" -> "sender Name")
                        .replace(/([a-z])([A-Z])/g, '$1 $2')
                        // Convert underscores, hyphens, dots to spaces
                        .replace(/[_\-\.]/g, ' ')
                        // Replace multiple spaces with single space
                        .replace(/\s+/g, ' ')
                        // Trim
                        .trim();
                },

                // Regex building
                /**
                 * Build regex patterns for all enabled placeholder formats
                 * @returns {Array<{name: string, rx: RegExp}>} Array of regex patterns
                 */
                buildRegexes() {
                    const patterns = [];

                    // Order matters: prefer longer/more specific delimiters first
                    if (this.formats.handlebars) {
                        patterns.push({
                            name: 'handlebars',
                            rx: /\{\{\s*([^\{\}]+?)\s*\}\}/g
                        });
                    }

                    if (this.formats.tpl) {
                        patterns.push({
                            name: 'tpl',
                            rx: /\$\{\s*([^\{\}]+?)\s*\}/g
                        });
                    }

                    if (this.formats.brackets) {
                        patterns.push({
                            name: 'brackets',
                            rx: /\[([^\[\]]+?)\]/g
                        });
                    }

                    if (this.formats.braces) {
                        // Use lookbehind/lookahead to avoid matching handlebars
                        try {
                            patterns.push({
                                name: 'braces',
                                rx: /(?<!\{)\{([^{}]+?)\}(?!\})/g
                            });
                        } catch (e) {
                            // Fallback for browsers without lookbehind support
                            patterns.push({
                                name: 'braces',
                                rx: /\{([^{}]+?)\}/g
                            });
                        }
                    }

                    // Custom delimiter support
                    if (this.customOpen && this.customClose) {
                        try {
                            const pattern = this.escapeRegex(this.customOpen) + 
                                          '([^\\r\\n]+?)' + 
                                          this.escapeRegex(this.customClose);
                            patterns.push({
                                name: 'custom',
                                rx: new RegExp(pattern, 'g')
                            });
                        } catch (e) {
                            // Silently ignore invalid custom regex
                            console.warn('Invalid custom delimiter pattern:', e);
                        }
                    }

                    return patterns;
                },

                // Parsing and processing
                /**
                 * Parse raw text to detect placeholders
                 */
                parse() {
                    this.isProcessing = true;
                    
                    // Use setTimeout to allow UI to update
                    setTimeout(() => {
                        const regexes = this.buildRegexes();
                        const seen = new Map();

                        // Extract all unique placeholders
                        regexes.forEach(({ rx }) => {
                            rx.lastIndex = 0;
                            let match;
                            
                            while ((match = rx.exec(this.raw)) !== null) {
                                const rawLabel = (match[1] || '').trim();
                                if (!rawLabel) continue;
                                
                                const key = this.slug(rawLabel);
                                if (!seen.has(key)) {
                                    const cleanedLabel = this.cleanLabel(rawLabel);
                                    seen.set(key, {
                                        key,
                                        label: cleanedLabel,
                                        placeholder: `Enter ${cleanedLabel.toLowerCase()}`
                                    });
                                }
                            }
                        });

                        this.placeholders = Array.from(seen.values());

                        // Preserve existing values when re-parsing
                        const nextValues = {};
                        this.placeholders.forEach(ph => {
                            nextValues[ph.key] = this.values[ph.key] ?? '';
                        });
                        this.values = nextValues;

                        this.apply();
                        this.isProcessing = false;
                    }, 10);
                },

                /**
                 * Apply values to placeholders and generate output
                 */
                apply() {
                    if (!this.raw) {
                        this.output = '';
                        this.filled = '';
                        return;
                    }

                    this.output = this.raw;
                    const regexes = this.buildRegexes();
                    let result = this.raw;

                    // Replace placeholders with values
                    regexes.forEach(({ rx }) => {
                        rx.lastIndex = 0;
                        result = result.replace(rx, (match, label) => {
                            const key = this.slug((label || '').trim());
                            const value = this.values[key] ?? '';
                            
                            if (value && value.length) {
                                return value;
                            }
                            
                            return this.keepTokens ? match : '';
                        });
                    });

                    this.filled = result;
                    this.persistValues();
                },

                /**
                 * Highlight placeholders in the preview with click handlers
                 * @param {string} text - Text to highlight
                 * @returns {string} HTML with highlighted tokens
                 */
                highlight(text) {
                    const regexes = this.buildRegexes();
                    let highlighted = text;

                    regexes.forEach(({ rx }) => {
                        rx.lastIndex = 0;
                        highlighted = highlighted.replace(rx, (match, label) => {
                            const key = this.slug((label || '').trim());
                            const value = this.values[key] ?? '';
                            const escapedLabel = this.escapeHtml(label.trim());
                            
                            if (value && value.length) {
                                // Filled token - add Tailwind classes for styling
                                return `<span class="token token-filled rounded-lg px-1.5 py-0.5 cursor-pointer transition-all duration-150 select-none hover:scale-105 active:scale-95" 
                                             data-key="${key}" 
                                             onclick="window.focusPlaceholder('${key}')" 
                                             title="Click to edit ${escapedLabel}">${this.escapeHtml(value)}</span>`;
                            }
                            
                            // Unfilled token - add Tailwind classes + animation
                            return `<span class="token token-missing rounded-lg px-1.5 py-0.5 cursor-pointer transition-all duration-150 select-none hover:scale-105 active:scale-95 animate-pulse-red hover:animate-none" 
                                         data-key="${key}" 
                                         onclick="window.focusPlaceholder('${key}')" 
                                         title="Click to fill ${escapedLabel}">${this.escapeHtml(match)}</span>`;
                        });
                    });

                    return highlighted;
                },

                // Value management
                clearValues() {
                    Object.keys(this.values).forEach(key => {
                        this.values[key] = '';
                    });
                    this.apply();
                },

                // Local storage management
                saveToLocal() {
                    try {
                        localStorage.setItem('pf.raw', this.raw);
                        localStorage.setItem('pf.values', JSON.stringify(this.values));
                        this.toast('✅ Saved to browser', 2000, 'success');
                    } catch (e) {
                        console.error('Failed to save to localStorage:', e);
                        this.toast('❌ Failed to save', 2000, 'error');
                    }
                },

                loadFromLocal() {
                    try {
                        const rawData = localStorage.getItem('pf.raw');
                        const valuesData = localStorage.getItem('pf.values');
                        
                        if (rawData) {
                            this.raw = rawData;
                        }
                        
                        if (valuesData) {
                            this.values = JSON.parse(valuesData) || {};
                        }
                        
                        // Re-parse and apply to update the preview
                        this.parse();
                    } catch (e) {
                        console.error('Failed to load from localStorage:', e);
                        this.values = {};
                    }
                },

                persistValues() {
                    try {
                        localStorage.setItem('pf.values', JSON.stringify(this.values));
                    } catch (e) {
                        console.error('Failed to persist values:', e);
                    }
                },

                resetAll() {
                    this.raw = '';
                    this.values = {};
                    this.placeholders = [];
                    this.output = '';
                    
                    localStorage.removeItem('pf.raw');
                    localStorage.removeItem('pf.values');
                },

                // Clipboard operations
                copyRaw() {
                    this.copyToClipboard(this.raw, '😀 Raw prompt copied');
                },

                copyOutput() {
                    this.copyToClipboard(this.filled || this.raw, '🤩 Filled prompt copied');
                },

                /**
                 * Copy text to clipboard with fallback
                 * @param {string} text - Text to copy
                 * @param {string} successMessage - Message to show on success
                 */
                copyToClipboard(text, successMessage) {
                    if (navigator.clipboard && navigator.clipboard.writeText) {
                        navigator.clipboard.writeText(text)
                            .then(() => this.toast(successMessage, 2000, 'success'))
                            .catch(() => this.toast('❌ Copy failed', 2000, 'error'));
                    } else {
                        // Fallback for older browsers
                        const textarea = document.createElement('textarea');
                        textarea.value = text;
                        textarea.style.position = 'fixed';
                        textarea.style.opacity = '0';
                        document.body.appendChild(textarea);
                        textarea.select();
                        
                        try {
                            document.execCommand('copy');
                            this.toast(successMessage, 2000, 'success');
                        } catch (e) {
                            this.toast('❌ Copy failed', 2000, 'error');
                        }
                        
                        document.body.removeChild(textarea);
                    }
                },

                // File operations
                downloadJSON() {
                    const data = {
                        prompt: this.raw,
                        values: this.values,
                        filled: this.filled,
                        exported_at: new Date().toISOString()
                    };

                    try {
                        const blob = new Blob(
                            [JSON.stringify(data, null, 2)], 
                            { type: 'application/json' }
                        );
                        const url = URL.createObjectURL(blob);
                        const link = document.createElement('a');
                        
                        link.href = url;
                        link.download = `prompt-filler-${Date.now()}.json`;
                        link.click();
                        
                        URL.revokeObjectURL(url);
                        this.toast('💾 Downloaded successfully', 2000, 'success');
                    } catch (e) {
                        console.error('Failed to download JSON:', e);
                        this.toast('❌ Download failed', 2000, 'error');
                    }
                },

                // UI feedback
                /**
                 * Show a toast notification using Alpine.js reactive state
                 * @param {string} message - Message to display
                 * @param {number} duration - Duration in milliseconds
                 * @param {string} type - Type of toast: 'success', 'error', 'info'
                 */
                toast(message, duration = 2000, type = 'info') {
                    // Set toast message and classes based on type
                    this.toastMessage = message;
                    
                    // stronger backdrop filters for better separation from background
                    let bgClass = 'bg-white/80 dark:bg-neutral-900/80 backdrop-blur-md backdrop-saturate-150';
                    let borderClass = 'border-neutral-200 dark:border-neutral-800';

                    if (type === 'success') {
                        bgClass = 'bg-green-50 dark:bg-green-900/30 backdrop-blur-md backdrop-saturate-150';
                        borderClass = 'border-green-200 dark:border-green-800';
                    } else if (type === 'error') {
                        bgClass = 'bg-red-50 dark:bg-red-900/30 backdrop-blur-md backdrop-saturate-150';
                        borderClass = 'border-red-200 dark:border-red-800';
                    }

                    this.toastClasses = `${borderClass} ${bgClass}`;
                    this.toastVisible = true;
                    
                    // Auto-hide after duration
                    setTimeout(() => {
                        this.toastVisible = false;
                        setTimeout(() => {
                            this.toastMessage = '';
                        }, 300); // Wait for transition to complete
                    }, duration);
                }
            }
        }
    </script>
</body>

</html>